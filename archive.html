<html>
                <head>
                    <title>Serendipitous Oulipo Haiku Archive</title>

                    <style>
                        /* Your existing styles here */
                        body {
                            font-family: sans-serif;
                            max-width: 800px;
                            margin: 100px;
                            padding: 20px;
                            line-height: 1.6;
                            background:  #d4cdc5;
                        }
                        .poem {
                            margin: 2em 0;
                            padding: 1.5em;
                            border: 1px solid #ddd;
                            border-radius: 8px;
                            background: white;
                            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                        }
                        .date {
                            color: #666;
                            font-size: 0.9em;
                            margin-top: 1em;
                            border-top: 1px solid #eee;
                            padding-top: 0.5em;
                        }
                        pre {
                            white-space: pre-wrap;
                            font-family: inherit;
                            margin: 0;
                            font-size: 1.1em;
                            line-height: 1.8;
                        }
                        .back-link {
                            display: inline-block;
                            margin: 20px 0;
                            color: #0066cc;
                            text-decoration: none;
                            padding: 10px 20px;
                            background: white;
                            border-radius: 4px;
                            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                        }
                        .back-link:hover {
                            background: #f8f8f8;
                        }

                        .nav {
                            position: fixed;
                            top: 0;
                            left: 0;
                            right: 0;
                            z-index: 100;
                            background: white;
                            padding: 1rem 2rem;
                            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                            display: flex;
                            align-items: center;
                            gap: 2rem;
                            flex-wrap: wrap;
                        }
                        .nav h1 {
                            margin: 0;
                            font-size:2rem;
                        }

                        .nav p {
                            margin: 0;
                            color: #666;
                            font-size: 2rem;
                        }

                        .nav-links {
                            display: flex;
                            gap: 1rem;
                            margin-left: auto;
                        }

                        .back-link {
                            color: #0066cc;
                            text-decoration: none;
                            padding: 0.5rem 1rem;
                            border-radius: 4px;
                            transition: background-color 0.2s;
                            font-size:1.1em;
                        }

                        .back-link:hover {
                            background-color: #f0f0f0;
                        }

                        @media (max-width: 600px) {
                            .nav {
                                padding: 1rem;
                                gap: 1rem;
                            }

                            .nav-links {
                                width: 100%;
                                justify-content: center;
                            }
                            .back-link {
                             font-size:2em;

                            }
                        }
                        .webmention-link {
                            position: absolute;
                            width: 1px;
                            height: 1px;
                            padding: 0;
                            margin: -1px;
                            overflow: hidden;
                            clip: rect(0, 0, 0, 0);
                            white-space: nowrap;
                            border: 0;
                            }
                        #loader {
                            text-align: center;
                            padding: 20px;
                            color: #666;
                            display: block;
                        }
                    </style>
                </head>
                <body>
                   <div class="nav">
                      <h1>Haiku Archive</h1>
                      <p>times in UTC</p>
                      <div class="nav-links">
                          <a href="/" class="back-link">&#8962;</a>
                          <a href="/rss.xml" class="back-link">RSS</a>
                      </div>
                  </div>

                    <div id="poems-container">
                            <div class="poem">
                                <pre>the simplest joy
reflect your being in the
ever evolving</pre>
                                <div class="date">
                                    July 31, 2025, 07:49 AM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                            <div class="poem">
                                <pre>gossamer catches
chaotic origami
of another Earth</pre>
                                <div class="date">
                                    July 31, 2025, 06:05 AM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                            <div class="poem">
                                <pre>do you ever just
dancing in erratic flight
with the deltoid curve</pre>
                                <div class="date">
                                    July 31, 2025, 03:54 AM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                            <div class="poem">
                                <pre>the gurgling crows
from the evening robins’ beaks
ready to unfurl</pre>
                                <div class="date">
                                    July 31, 2025, 12:50 AM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                            <div class="poem">
                                <pre>Earth has silhouettes
whisper of white oaks and fir
of that great distance</pre>
                                <div class="date">
                                    July 30, 2025, 10:16 PM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                            <div class="poem">
                                <pre>bubbles have been packed
constructed with four circles
a breath of color</pre>
                                <div class="date">
                                    July 30, 2025, 07:48 PM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                            <div class="poem">
                                <pre>an insane loudness
fill yourself with this bounty
raining from the sky</pre>
                                <div class="date">
                                    July 30, 2025, 06:00 PM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                            <div class="poem">
                                <pre>tiny little life
for this — the ground shaking breath
of what surrounds you</pre>
                                <div class="date">
                                    July 30, 2025, 05:00 PM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                            <div class="poem">
                                <pre>I feel this blanket
translate, reflect, rotate and
critical moments</pre>
                                <div class="date">
                                    July 30, 2025, 04:16 PM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                            <div class="poem">
                                <pre>bees bring such a joy
arcs of me, of time — being
catches the sun’s rays</pre>
                                <div class="date">
                                    July 30, 2025, 02:54 PM
                                </div>
                                <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>
                            </div>
                        
                    </div>
                    <div id="loader" class="loader">Loading more poems...</div>

                    <script>
                        // Only embed metadata, fetch full data as needed
                        let allPoems = null; // Will be loaded on first scroll
                        let currentPage = 2;
                        const limit = 10;
                        let isLoading = false;
                        let hasNextPage = true;
                        const totalPoems = 20359;

                        async function loadAllPoems() {
                            if (allPoems) return allPoems; // Already loaded

                            try {
                                console.log("Loading full poems data...");
                                const response = await fetch('/data/poems.json');
                                if (!response.ok) throw new Error('Failed to load poems');
                                allPoems = await response.json();
                                console.log("Loaded", allPoems.length, "poems");
                                return allPoems;
                            } catch (error) {
                                console.error("Error loading poems:", error);
                                // Fallback: disable further loading
                                hasNextPage = false;
                                document.getElementById('loader').style.display = 'none';
                                return [];
                            }
                        }

                        async function loadMorePoems() {
                            if (isLoading || !hasNextPage) return;
                            isLoading = true;
                            console.log("Loading more poems...");

                            // Fetch all poems data if not already loaded
                            const poems = await loadAllPoems();
                            if (!poems.length) {
                                isLoading = false;
                                return;
                            }

                            const startIndex = (currentPage - 1) * limit;
                            const endIndex = startIndex + limit;
                            const paginatedPoems = poems.slice(startIndex, endIndex);

                            console.log("Rendering poems:", paginatedPoems.length);

                            const poemsContainer = document.getElementById('poems-container');
                            paginatedPoems.forEach(poem => {
                                const poemDiv = document.createElement('div');
                                poemDiv.className = 'poem';
                                poemDiv.innerHTML = `
                                    <pre>${poem.content}</pre>
                                    <div class="date">${new Date(poem.date).toLocaleDateString('en-US', {
                                        year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit'
                                    })}</div>
                                    <a href="https://fed.brid.gy/" class="webmention-link">Bridgy Fed</a>`;
                                poemsContainer.appendChild(poemDiv);
                            });

                            currentPage++;
                            hasNextPage = endIndex < poems.length;
                            isLoading = false;

                            // Hide loader if no more pages
                            if (!hasNextPage) {
                                document.getElementById('loader').style.display = 'none';
                            }
                        }

                        window.addEventListener('scroll', () => {
                            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 100) {
                                loadMorePoems();
                            }
                        });
                    </script>
                </body>
            </html>